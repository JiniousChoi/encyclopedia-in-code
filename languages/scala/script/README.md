# [How to use Scala as a scripting language](https://alvinalexander.com/scala/how-to-write-scala-shell-scripts-scripting-language-examples)

### Every scripts here uses built-in-shell command, `exec`, to execute scala interpreter for the code
```bash
#!/bin/sh
exec scala [-classpath "path/to/lib1[:path/to/libx]"] "$0" "$@"
!#
<scala code here>
```

```bash
#!/bin/sh
exec scala "$0" "$@"
!#
<scala code here>
```

## Project Structure
```console
$ tree
.
├── libs
│   ├── building-scala-libraries.jar
│   └── jutil.jar
├── script_01.sh
├── script_02.sh
├── script_03.sh
└── script_04.sh

$ jar tf libs/jutil.jar 
META-INF/MANIFEST.MF
jinchoi/
jinchoi/util/
jinchoi/util/JMath$.class
jinchoi/util/JMath.class

$ jar tf libs/building-scala-libraries.jar
META-INF/
META-INF/MANIFEST.MF
Library.class
```

## Details on `jutil` by sbt
```console
$ tree
.
└── src
    ├── main
    │   └── scala
    │       └── jinchoi
    │           └── util
    │               └── JMath.scala
    └── test
        └── scala

7 directories, 1 file

$ cat src/main/scala/jinchoi/util/JMath.scala
package jinchoi.util

object JMath {
  def add(a: Int, b: Int): Int = a + b
}

$ sbt package
[warn] No sbt.version set in project/build.properties, base directory: /Users/jinchoi/github/encyclopedia-in-code/languages/scala/script/test/jutil
[info] Loading settings from idea.sbt ...
[info] Loading global plugins from /Users/jinchoi/.sbt/1.0/plugins
[info] Set current project to jutil (in build file:/Users/jinchoi/github/encyclopedia-in-code/languages/scala/script/test/jutil/)
[info] Updating ...
[info] Done updating.
[info] Compiling 1 Scala source to /Users/jinchoi/github/encyclopedia-in-code/languages/scala/script/test/jutil/target/scala-2.12/classes ...
[info] Non-compiled module 'compiler-bridge_2.12' for Scala 2.12.4. Compiling...
[info]   Compilation completed in 9.192s.
[info] Done compiling.
[info] Packaging /Users/jinchoi/github/encyclopedia-in-code/languages/scala/script/test/jutil/target/scala-2.12/jutil_2.12-0.1.0-SNAPSHOT.jar ...
[info] Done packaging.
[success] Total time: 11 s, completed Jun 21, 2018 11:44:00 AM

$ tree
.
├── src
│   ├── main
│   │   └── scala
│   │       └── jinchoi
│   │           └── util
│   │               └── JMath.scala
│   └── test
│       └── scala
└── target
    ├── scala-2.12
    │   ├── classes
    │   │   └── jinchoi
    │   │       └── util
    │   │           ├── JMath$.class
    │   │           └── JMath.class
    │   ├── jutil_2.12-0.1.0-SNAPSHOT.jar
... omit ...

82 directories, 52 files
```

## Details on `building-scala-libraries` by gradle
```console
$ gradle init --type scala-library
> Task :wrapper
> Task :init

BUILD SUCCESSFUL in 4s
2 actionable tasks: 2 executed

$ tree
.
├── build.gradle
├── gradle
│   └── wrapper
│       ├── gradle-wrapper.jar
│       └── gradle-wrapper.properties
├── gradlew
├── gradlew.bat
├── settings.gradle
└── src
    ├── main
    │   └── scala
    │       └── Library.scala
    └── test
        └── scala
            └── LibrarySuite.scala
            
$ cat src/main/scala/Library.scala 
/*
 * This Scala source file was generated by the Gradle 'init' task.
 */
class Library {
  def someLibraryMethod(): Boolean = true
}

$ ./gradlew build

> Task :compileScala
Pruning sources from previous analysis, due to incompatible CompileSetup.

> Task :compileTestScala
Pruning sources from previous analysis, due to incompatible CompileSetup.

BUILD SUCCESSFUL in 10s
4 actionable tasks: 4 executed

$ tree
.
├── build
│   ├── classes
│   │   └── scala
│   │       ├── main
│   │       │   └── Library.class
│   │       └── test
│   │           ├── LibrarySuite$$anonfun$1.class
│   │           └── LibrarySuite.class
│   ├── libs
│   │   └── building-scala-libraries.jar
│   ├── reports
│   │   ...
│   ├── test-results
│   │   ...
│   └── tmp
│       ...
├── build.gradle
├── gradle
│   ...
├── gradlew
├── gradlew.bat
├── settings.gradle
└── src
    ├── main
    │   └── scala
    │       └── Library.scala
    └── test
        └── scala
            └── LibrarySuite.scala

29 directories, 27 files
```
